var x=document.getElementById("info");Location();var setPost=setInterval(Location,3e4),timezone=8;function Location(){navigator.geolocation?navigator.geolocation.getCurrentPosition(showPositionGeolocation,function(){showPositionIPLookup()}):x.innerHTML="Geolocation is not supported by this browser."}function showPositionGeolocation(b){var e=b.coords.latitude,f=b.coords.longitude;x.innerHTML="Latitude: "+e+"<br>Longitude: "+f,getFingerprintAndPost(b.coords.latitude,b.coords.longitude,b.coords.altitude,b.coords.accuracy,b.coords.heading,b.coords.speed)}function showPositionIPLookup(){var b=geoplugin_latitude(),e=geoplugin_longitude();x.innerHTML="Latitude: "+b+"<br>Longitude: "+e,getFingerprintAndPost(geoplugin_latitude(),geoplugin_longitude(),null,-1,null,null)}function getTime(b){return moment.utc().add(b,"hours").format("YYYY-MM-DD HH:mm:ss")}function getFingerprintAndPost(b,e,f,g,h,j){new Fingerprint2().get(function(k){postJson(getTime(timezone),b,e,f,g,h,j,getHost(),window.navigator.language,checkOS(),k)})}function getHost(){return window.location==window.parent.location?document.location.hostname:getHostName(document.referrer)}function getHostName(b){var e=document.createElement("a");return e.href=b,e.hostname}function checkOS(){var b="Unknown";return-1!=window.navigator.userAgent.indexOf("Windows NT 10.0")&&(b="Windows 10"),-1!=window.navigator.userAgent.indexOf("Windows NT 6.2")&&(b="Windows 8"),-1!=window.navigator.userAgent.indexOf("Windows NT 6.1")&&(b="Windows 7"),-1!=window.navigator.userAgent.indexOf("Windows NT 6.0")&&(b="Windows Vista"),-1!=window.navigator.userAgent.indexOf("Windows NT 5.1")&&(b="Windows XP"),-1!=window.navigator.userAgent.indexOf("Windows NT 5.0")&&(b="Windows 2000"),-1!=window.navigator.userAgent.indexOf("Mac")&&(b="Mac/iOS"),-1!=window.navigator.userAgent.indexOf("X11")&&(b="UNIX"),-1!=window.navigator.userAgent.indexOf("Linux")&&(b="Linux"),b}function postJson(b,e,f,g,h,j,k,l,m,n,o){var p=addData(b,e,f,g,h,j,k,l,m,n,o);$.ajax({type:"POST",data:JSON.stringify(p),contentType:"application/json",url:"/data"})}function addData(b,e,f,g,h,j,k,l,m,n,o){var p={ts:b,device:checkCookie(),lat:e,lon:f,altitude:g,accuracy:h,heading:j,speed:k,host:l,lang:m,os:n,fingerprint:o};return p}function getCookie(b){for(var j,e=b+"=",f=decodeURIComponent(document.cookie),g=f.split(";"),h=0;h<g.length;h++){for(j=g[h];" "==j.charAt(0);)j=j.substring(1);if(0==j.indexOf(e))return j.substring(e.length,j.length)}return""}function checkCookie(){var b=getCookie("deviceUniqueId");return""==b&&($.ajax({async:!1,url:"maxdevice",success:function(e){b=e}}),setCookie("deviceUniqueId",b,365)),b=parseInt(b)+1,b}function setCookie(b,e,f){var g=new Date;g.setTime(g.getTime()+1e3*(60*(60*(24*f))));var h="expires="+g.toUTCString();document.cookie=b+"="+e+";"+h+";path=/"}